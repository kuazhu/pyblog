<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PyCMS 项目实战 | PyCMS</title>
    <meta name="description" content="基于Python3.7的企业门户网站实战">
    
    
    <link rel="preload" href="/pycms/assets/css/0.styles.82cfaca7.css" as="style"><link rel="preload" href="/pycms/assets/js/app.faa99c4c.js" as="script"><link rel="preload" href="/pycms/assets/js/2.48b92fcd.js" as="script"><link rel="preload" href="/pycms/assets/js/3.4ab1e0fa.js" as="script"><link rel="prefetch" href="/pycms/assets/js/4.76dc625f.js"><link rel="prefetch" href="/pycms/assets/js/5.0b6e4953.js"><link rel="prefetch" href="/pycms/assets/js/6.df4442b0.js">
    <link rel="stylesheet" href="/pycms/assets/css/0.styles.82cfaca7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/pycms/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">PyCMS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/pycms/" class="nav-link router-link-exact-active router-link-active">首页</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/pycms/" class="nav-link router-link-exact-active router-link-active">首页</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PyCMS 项目实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pycms/#人生苦短-为什么我要用python" class="sidebar-link">人生苦短,为什么我要用python?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pycms/#实战目标" class="sidebar-link">实战目标</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pycms/#学习前提" class="sidebar-link">学习前提</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pycms/#环境搭建" class="sidebar-link">环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#编程语言python3-7" class="sidebar-link">编程语言python3.7</a></li><li class="sidebar-sub-header"><a href="/pycms/#ide-pycharm专业版" class="sidebar-link">IDE pycharm专业版</a></li><li class="sidebar-sub-header"><a href="/pycms/#虚拟环境-virtualenvwrapper" class="sidebar-link">虚拟环境 virtualenvwrapper</a></li></ul></li><li><a href="/pycms/#初始化项目" class="sidebar-link">初始化项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#创建项目的虚拟环境" class="sidebar-link">创建项目的虚拟环境</a></li><li class="sidebar-sub-header"><a href="/pycms/#在虚拟环境中安装django" class="sidebar-link">在虚拟环境中安装django</a></li><li class="sidebar-sub-header"><a href="/pycms/#查看django" class="sidebar-link">查看django</a></li><li class="sidebar-sub-header"><a href="/pycms/#用pycharm新建django项目" class="sidebar-link">用pycharm新建django项目</a></li><li class="sidebar-sub-header"><a href="/pycms/#完善项目目录结构" class="sidebar-link">完善项目目录结构</a></li><li class="sidebar-sub-header"><a href="/pycms/#pycharm-创建django应用" class="sidebar-link">pycharm 创建django应用</a></li><li class="sidebar-sub-header"><a href="/pycms/#django项目目录结构解析" class="sidebar-link">django项目目录结构解析</a></li></ul></li><li><a href="/pycms/#web原理解析和mvc介绍" class="sidebar-link">WEB原理解析和MVC介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#web原理解析" class="sidebar-link">WEB原理解析</a></li><li class="sidebar-sub-header"><a href="/pycms/#mvc介绍" class="sidebar-link">MVC介绍</a></li></ul></li><li><a href="/pycms/#静态页面路由配置" class="sidebar-link">静态页面路由配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#添加view类" class="sidebar-link">添加View类</a></li><li class="sidebar-sub-header"><a href="/pycms/#添加html页面" class="sidebar-link">添加html页面</a></li><li class="sidebar-sub-header"><a href="/pycms/#配置路由" class="sidebar-link">配置路由</a></li></ul></li><li><a href="/pycms/#静态资源处理" class="sidebar-link">静态资源处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#在html页面中使用静态资源" class="sidebar-link">在html页面中使用静态资源</a></li><li class="sidebar-sub-header"><a href="/pycms/#添加静态资源" class="sidebar-link">添加静态资源</a></li><li class="sidebar-sub-header"><a href="/pycms/#配置静态文件查找路径配置" class="sidebar-link">配置静态文件查找路径配置</a></li><li class="sidebar-sub-header"><a href="/pycms/#修改html中静态资源的引用" class="sidebar-link">修改html中静态资源的引用</a></li></ul></li><li><a href="/pycms/#模版的使用" class="sidebar-link">模版的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#定义模版" class="sidebar-link">定义模版</a></li><li class="sidebar-sub-header"><a href="/pycms/#继承并且填充模版" class="sidebar-link">继承并且填充模版</a></li></ul></li><li><a href="/pycms/#配置其他路由和跳转" class="sidebar-link">配置其他路由和跳转</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#view类" class="sidebar-link">View类</a></li><li class="sidebar-sub-header"><a href="/pycms/#配置路由-2" class="sidebar-link">配置路由</a></li><li class="sidebar-sub-header"><a href="/pycms/#配置跳转" class="sidebar-link">配置跳转</a></li><li class="sidebar-sub-header"><a href="/pycms/#记录导航选中状态" class="sidebar-link">记录导航选中状态</a></li></ul></li><li><a href="/pycms/#模型定义" class="sidebar-link">模型定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#安装pillow" class="sidebar-link">安装Pillow</a></li><li class="sidebar-sub-header"><a href="/pycms/#定义共同父类" class="sidebar-link">定义共同父类</a></li><li class="sidebar-sub-header"><a href="/pycms/#定义站点配置模型" class="sidebar-link">定义站点配置模型</a></li><li class="sidebar-sub-header"><a href="/pycms/#数据库表操作和创建管理员" class="sidebar-link">数据库表操作和创建管理员</a></li></ul></li><li><a href="/pycms/#后台管理配置" class="sidebar-link">后台管理配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#注册模型" class="sidebar-link">注册模型</a></li><li class="sidebar-sub-header"><a href="/pycms/#配置中文和时区" class="sidebar-link">配置中文和时区</a></li><li class="sidebar-sub-header"><a href="/pycms/#修改网页title和站点header" class="sidebar-link">修改网页title和站点header</a></li><li class="sidebar-sub-header"><a href="/pycms/#修改应用的中文名称" class="sidebar-link">修改应用的中文名称</a></li><li class="sidebar-sub-header"><a href="/pycms/#配置上传资源路径" class="sidebar-link">配置上传资源路径</a></li><li class="sidebar-sub-header"><a href="/pycms/#自定义表单" class="sidebar-link">自定义表单</a></li><li class="sidebar-sub-header"><a href="/pycms/#列表显示" class="sidebar-link">列表显示</a></li><li class="sidebar-sub-header"><a href="/pycms/#admin登陆添加验证码" class="sidebar-link">admin登陆添加验证码</a></li></ul></li><li><a href="/pycms/#分配数据到模版展示" class="sidebar-link">分配数据到模版展示</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#获取和分配数据-objects-get-获取一条" class="sidebar-link">获取和分配数据(objects.get()获取一条)</a></li><li class="sidebar-sub-header"><a href="/pycms/#展示数据" class="sidebar-link">展示数据</a></li></ul></li><li><a href="/pycms/#友情连接" class="sidebar-link">友情连接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#模型定义-2" class="sidebar-link">模型定义</a></li><li class="sidebar-sub-header"><a href="/pycms/#获取和分配数据-objects-all-获取所有" class="sidebar-link">获取和分配数据(objects.all()获取所有)</a></li><li class="sidebar-sub-header"><a href="/pycms/#展示数据-2" class="sidebar-link">展示数据</a></li></ul></li><li><a href="/pycms/#首页轮播图" class="sidebar-link">首页轮播图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#模型定义-3" class="sidebar-link">模型定义</a></li></ul></li><li><a href="/pycms/#产品" class="sidebar-link">产品</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#模型定义-4" class="sidebar-link">模型定义</a></li><li class="sidebar-sub-header"><a href="/pycms/#数据获取-filter筛选" class="sidebar-link">数据获取(filter筛选)</a></li></ul></li><li><a href="/pycms/#服务" class="sidebar-link">服务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#模型定义-5" class="sidebar-link">模型定义</a></li></ul></li><li><a href="/pycms/#产品页面开发" class="sidebar-link">产品页面开发</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pycms/#动态页面开发" class="sidebar-link">动态页面开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#动态模型" class="sidebar-link">动态模型</a></li><li class="sidebar-sub-header"><a href="/pycms/#安装分页应用" class="sidebar-link">安装分页应用</a></li><li class="sidebar-sub-header"><a href="/pycms/#在views-py中使用分页应用" class="sidebar-link">在views.py中使用分页应用</a></li><li class="sidebar-sub-header"><a href="/pycms/#在模版中使用分页" class="sidebar-link">在模版中使用分页</a></li></ul></li><li><a href="/pycms/#动态详情页面开发" class="sidebar-link">动态详情页面开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#获取动态并分配给模版" class="sidebar-link">获取动态并分配给模版</a></li></ul></li><li><a href="/pycms/#关于我们页面开发" class="sidebar-link">关于我们页面开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#定义模型" class="sidebar-link">定义模型</a></li><li class="sidebar-sub-header"><a href="/pycms/#数据展示" class="sidebar-link">数据展示</a></li></ul></li><li><a href="/pycms/#配置错误页面" class="sidebar-link">配置错误页面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#准备相关的错误页面" class="sidebar-link">准备相关的错误页面</a></li><li class="sidebar-sub-header"><a href="/pycms/#修改settings-py文件" class="sidebar-link">修改settings.py文件</a></li><li class="sidebar-sub-header"><a href="/pycms/#修改urls-py文件" class="sidebar-link">修改urls.py文件</a></li><li class="sidebar-sub-header"><a href="/pycms/#收集静态文件" class="sidebar-link">收集静态文件</a></li><li class="sidebar-sub-header"><a href="/pycms/#收集项目所需依赖文件" class="sidebar-link">收集项目所需依赖文件</a></li></ul></li><li><a href="/pycms/#部署上线" class="sidebar-link">部署上线</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pycms/#购买云服务器-以阿里云为例" class="sidebar-link">购买云服务器(以阿里云为例)</a></li><li class="sidebar-sub-header"><a href="/pycms/#开放云服务器的端口" class="sidebar-link">开放云服务器的端口</a></li><li class="sidebar-sub-header"><a href="/pycms/#登陆服务器" class="sidebar-link">登陆服务器</a></li><li class="sidebar-sub-header"><a href="/pycms/#用pycharm上传代码" class="sidebar-link">用pycharm上传代码</a></li><li class="sidebar-sub-header"><a href="/pycms/#环境安装" class="sidebar-link">环境安装</a></li><li class="sidebar-sub-header"><a href="/pycms/#域名解析" class="sidebar-link">域名解析</a></li><li class="sidebar-sub-header"><a href="/pycms/#uwsgi-nignx部署项目" class="sidebar-link">uwsgi+nignx部署项目</a></li></ul></li><li><a href="/pycms/#附录-pycharm常用调试技巧" class="sidebar-link">附录:pycharm常用调试技巧</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pycms-项目实战"><a href="#pycms-项目实战" class="header-anchor">#</a> PyCMS 项目实战</h1> <h2 id="人生苦短-为什么我要用python"><a href="#人生苦短-为什么我要用python" class="header-anchor">#</a> 人生苦短,为什么我要用python?</h2> <ul><li>首先让我们来看一个2019年最新的编程语言权威排行榜<a href="https://octoverse.github.com/" target="_blank" rel="noopener noreferrer">github octoverse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>既然python如此流行,谁能告诉我why?
<ul><li>易上手</li> <li>跨平台</li> <li>高薪水</li> <li>应用广</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>python除了不能生孩子,啥都能干,如WEB开发,网络爬虫,数据分析,大数据,人工智能,服务器运维,自动化测试...</p></div></li></ul> <h2 id="实战目标"><a href="#实战目标" class="header-anchor">#</a> 实战目标</h2> <p>使用Python3.7+Django2.2+sqlite实现一个企业门户网站<a href="http://www.ponlay.com" target="_blank" rel="noopener noreferrer">先睹为快<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>该网站能满足大多数企业门户网站的需求</p></div> <h2 id="学习前提"><a href="#学习前提" class="header-anchor">#</a> 学习前提</h2> <ul><li>对编程感兴趣</li> <li>了解python的基础语法</li> <li>了解html/css/js</li></ul> <h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <h3 id="编程语言python3-7"><a href="#编程语言python3-7" class="header-anchor">#</a> 编程语言python3.7</h3> <ul><li><p>windows环境</p> <ul><li><a href="https://www.python.org/ftp/python/3.7.4/python-3.7.4-amd64.exe" target="_blank" rel="noopener noreferrer">下载安装包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>执行下载的安装包,注意在安装时选中Add Python 3.7 to PATH
<img src="/pycms/assets/img/py1.808ecd7c.png" alt=""> <img src="/pycms/assets/img/py2.d09a290e.png" alt=""></li></ul></li> <li><p>Mac环境</p> <ul><li><a href="https://www.python.org/ftp/python/3.7.3/python-3.7.3-macosx10.9.pkg" target="_blank" rel="noopener noreferrer">下载安装文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>执行下载的安装包</li> <li>配置</li></ul> <p>在<code>~/.bash_profile</code> 文件中添加如下配置</p> <div class="language-shell script extra-class"><pre class="language-text"><code>PATH=&quot;/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}&quot;
alias python=&quot;/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7&quot;
</code></pre></div><ul><li>激活<code>~/.bash_profile</code>文件</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>source ~/.bash_profile
</code></pre></div></li> <li><p>查看</p> <ul><li>安装完成后在终端查看python</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>python --version
</code></pre></div><ul><li>安装完成后在终端查看pip3</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 -V
</code></pre></div></li></ul> <h3 id="ide-pycharm专业版"><a href="#ide-pycharm专业版" class="header-anchor">#</a> IDE pycharm专业版</h3> <ul><li>windows环境
<ul><li><a href="https://www.jetbrains.com/pycharm/download/download-thanks.html?platform=windows" target="_blank" rel="noopener noreferrer">下载pycharm Professional 安装包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <img src="/pycms/assets/img/p1.b4fa13d9.png" alt=""> <img src="/pycms/assets/img/p2.3fc0b53e.png" alt=""> <img src="/pycms/assets/img/p3.80da58df.png" alt=""> <img src="/pycms/assets/img/p4.f7931779.png" alt=""> <img src="/pycms/assets/img/p5.bea06bcf.png" alt=""></li></ul></li> <li>Mac环境
<ul><li><a href="https://www.jetbrains.com/pycharm/download/download-thanks.html?platform=mac" target="_blank" rel="noopener noreferrer">下载pycharm Professional 安装包<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul> <h3 id="虚拟环境-virtualenvwrapper"><a href="#虚拟环境-virtualenvwrapper" class="header-anchor">#</a> 虚拟环境 virtualenvwrapper</h3> <p>虚拟环境的主要作用是给不同的项目创建独立的运行环境,每一个虚拟环境可以有自己版本的依赖包</p> <ul><li><p>Windows 安装</p> <ul><li>在命令行执行</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 install virtualenvwrapper-win -i https://mirrors.aliyun.com/pypi/simple/
</code></pre></div><ul><li>新建<code>WORKON_HOME</code>系统变量,值为一个有效的路径,用了存放虚拟环境</li></ul> <p><img src="/pycms/assets/img/w1.547bef23.jpeg" alt=""> <img src="/pycms/assets/img/w2.1934d4f0.jpeg" alt=""> <img src="/pycms/assets/img/w3.f0d091b2.png" alt=""> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAEAAAEDCAYAAABEcx20AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAACYaSURBVHhe7d29rttMnufxkyx2L2EvYfMHcHAuxZGjcw2DSRxs4NSX4LABo1OH03CwWcPRABMYGKCDSRoTNCaaTEsWWVKxWHyRKB691OcLfNEt8V0P61T9fyzJL//7//7bgSRJkiRJPr8hBAAAAAAAAM+NEAAAAAAAgEoQAgAAAAAAUAlCAAAAAAAAKkEIAAAAAABAJQgBAAAAAACoBCEAAAAAAACVIAQAAAAAAKAShAAAAAAAAFSCEAAAAAAAgEoQAgAAAAAAUAlCAAAAAAAAKkEIUOT34evry+Hl7Uf/esjvr6+H16+/+1cAAAAAADwG20OA318Pry+vh/U18Y/D21nrN1u8TRfkZxHOtdlX5mjX/XpThwznc+Y1nGiv/0WIAAAAAAB4d64yEyAUxa9fD3Nlbfv0vCu6zy+eV4UAP96ORf20b00Jvszy9XSF/KXBRPdZnPM59DMTRtcz5brrBAAAAAC8L23N9te//rV/tY52/Xa7a3BZCDDxRP1kW4QOC9fSk+9TMJDYFt9rCvqF0KEjnsMZBXc+C2BVuHAybHfmNiWHn1d3HatmD4RjCwEAAAAA4B5pC/r/8T//1+og4Nz1l7h8JkBbLI8K8fYJeSxAzyhcW/rCufRwPZ8JEMKDpRAgBhVTT+vb4xX2sTQLICy/sMgezWhYXbCbCQAAAAAAz8Lawv7aAUDL5SFALEyTorYrcpsCOlTQZ4QAfcEe1l2cZZBZTg2aZVOFcD+Vv/G1Odcf6ekVZwGc9hPCh2xWQXvNc9fYbhP3NxcCtMtKl9JhJgAAAAAAPBNLBf7S8kvZEAI0hKK5KzjbYndYfK4tXJe/X58Xz+FYxaf1a5+Yl4rkftvjfrMf8AvFdaFQD+9PfN0gfD7tvyTQbTQdAvxuVp3Yf2DtdUWFAAAAAABw70wV+lPvX4OLQoA1BWlb+C6HAHnh3dMX3LOOQoBhoTwoppPZBXPnE4r0fr1gPEa/fXnbeNys8M5nFTTMzQRoCeHGWT8YCAAAAAB4ZPKCf88AoGXbTICeUXEbWHh63RbYSXE+eL/fQ2T9TIAxYd1sv+3+RqebMni6f/r6wKJxpxOhwVII0NKdb/fe8dy32Fw3AAAAAOB+aQv+WPjvGQC07B4CnArhrpieK77L+5l+f56JJ/TN+z/euuJ67sl+8XCDoj27vlD4d8FBKN7PPt8T45Ci/NkVP5fkPAAAAAAAj8F7BAAtl4UAi9P120J5OQQIxfLxCf1p/fD+aJ+5M4XuikI4FNDtfrIieraAb6+7cL5luuXj85526rDxsyttU1YIAAAAAACPQhoAPPBMgLzoLz3Nbt+LBWtpecf6mQDnF97BWNgvfD0hBASrQ4ATYbvJwrwv8JPjjCl/NmYCAAAAAMBjkxf++etrc3EI0BW23dT4WIy2/3usSUfF6EIhG6falwrxSdOp/mmgkDFXGIen++1x4zU1+81PsmdYdK8PAVrCtvk5xGudON6JPihYrRAAAAAAAO6dqYJ/6v1rcFkI0BevsQA+FsdJsR0K6sHT7XIIcCyEk/3lDIvvZdr1B/sahADdeSwX73FWQb9df56n0xiHAKPjZoTPJBy7+5cT2v9/xmWNOPdzAQAAAADcB0uF/tLyS7koBMiLz/R1KHTfvhaekk+EAA1hm5mCeH2xGwv3t6ZwT46dhgDN+8d/laAwBT+ey/Bper/fwTnkIcA4FBgTz6939isAHeHa4/rnumL/AAAAAID3ZW2Bv3a9c7hsJkBGXqR3hXQ6Vb9lfibA29vpxwbnC+kJ4o8VlsKCwUyAE7HA7jaZKuL7qfijgjpffyrk6LfvzUOD+P4lU/jXhyMAAAAAgHvg3ML+2kHA5SFAfJo+KmDni+Hh+32BnL65+C8PZLbbhm2GRXQXRGTrlShse6Q/l6lNx+faBR/DY+dhyAT5vpqDbpoFEH392h8AAAAAAHBr2jrt3IK+Xb/d7hpcZSbApYRiebLCBgAAAAAA1+SmIQAAAAAAAHg/hAAAAAAAAFSCEAAAAAAAgEoQAgAAAAAAUAlCAAAAAAAAKkEIAAAAAABAJQgBAAAAAACoBCEAAAAAAACVIAQAAAAAAKAShAAAAAAAAFSCEAAAAAAAgEoQAgAAAAAAUAlCAAAAAAAAKkEIAAAAAABAJRxDgH/84x8kSZIkSfKJFQKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAcgN/vM//zNJkiRJ7mqpFrlUIQC5wbZBAgAAAMBeCAHIO1IIAAAAAGBPhADkHSkEAAAAALAnQgDyjhQCAAAAANgTIQB5RwoBAAAAAOyJEIC8I4UAAAAAAPZECEDekUIAAAAAAHsiBCDvyDwE+PH2cnh5eTm8/ejfGPD78PW1Xf56+Pq7fyvl99fDa7PtS2njuGzgxH5aiut3Fs/tx9vEsh+Ht36719LBNpxX+TPq6D7Hmf2U6PddPM+e319fV5/fudczd9wj/ec82mfxuL2vX5s7BwAAALUiBCDvyNFMgL7IKxeE8wV1V6DmxXEMDgpFcywoS0XiREEcjzE6/kQIMB1qbDuvsPzlrflEyrx/CLDxc35t9ruiWI+f51QIMHfuAAAAqJMnCAG+Hz41g90PX34Vlr2v3z+1g/FPh++FZeQaRyFALPRLBWEoJl+bgrFZPq6qi4XvYjEci+p8fzNFZbfPrAAvhAAxMFh7rgOWzuvtrby8Z3H/JVYU0lMhwLWuZ+JyOsK6r4e3t8I5rDh3AAAA1MlTzAT49eVDMwj+cPjyq7x87K/Dlw/tIH2tKwr775/Cup++F5at8deXw4f2WJ++D18v7LMLHk7Xnr/mYzkOAaan/IdC8/Xr4WupCC+FB31hvlQYFmcQzBSVxUI4DwHmnn5f6bzmCu93DQGueT0zswHC8mbj4jkIAQAAADDBY4QAfYG9xeFMgS4EWDV7IBx7IQQ45/w+fDn8Gu2jDyXSZUkIMHf8cdFf2BcfxnEIMFEsxnCgfTMUneUiMH3S3BXC01PmjxS2nSsq5wrhsIu4v4ljX++8pmdNvGcIcLXrKf13jfTrtZsKAQAAAHAODz0TIBTA8cl565qCPXjFmQB9sb40A2B2tkI472xZv98Pnz4NZwhkFp/8rzwn3p+lEGCuWEyL7EHBlxbhgZmvFYzoA4Z03cmisrBuy/H48XcLpgrwK59Xf9z8PN8vBLjm9SRBT0Z33C5oEAIAAADgHB4uBGiL6VjczoUA7bLpIvhKMwH6GQCbAoDGcB35k/sYAjTnWCz0e6eWFffJu7cYAhQKy2HhNy4Wx0+j+30UCsox/f7S7SeKysniui/Go9OHvf55lZ7EbwkB0usoWwgBrnQ9xQK/P8bsOjPnvurUAAAA8LQ8VggQCuMPTWHcFf6h0C2GAL+awnuuQN8+E6Ar7OP+u/2VjtUV6TMzCaZ+2DAJAeI6paJ+MiAYzS7o9zF7Lry15RBgXMSG10koMCx8++Jy8DT6OsXpqG1M7S8+kW9/5b5db/LJ+B7hxHifW0KAPPhIGRfgV76ewjnkx5wLAebOHQAAAHXyOCFAYYr7dAjQvT7/BwNXOpod0D6t70KBUzHfF90T0/iPjor13kEIENcbhwWTIcDo8xICPIJTIUAsqrvaslBohuV9IThXGE8W4ymFEKGwz66wnniynJxvXK9ckF7/vFq6wvh0bu8eAlz9c45Bwfi/vRAAAAAA5/AYIUBeEPcuhQCtXRDQvRef3m9yZor9cP/rwof0/AbLCtdcmlUwGQJMzTDgXTsZAvRFXSj++v8/KL7Tom8QGEQKT52nSI8VKRaVM/scnENcLz+nlj3Oq2W43/cLAXa4nv6znPpvKwQAAADAOTxECBAK5aUn6jO2hfJwqn5XIOfT90ehQmsoxtcV9F1BXv5awJRhm1KwUAw+xrMLpkOA/isPGz43vr+TIUAsLl+/Hn6Eoi8vMk/Ly/9kYENaTM5wVlHZ73NQyLbkxWoseEuF+B7n1ZIse78QoOHq1zP/31YIAAAAgHN4jJkAwXO/xz9XjMep8WudCgHOP6e84D8vBDjNNojXJgR4LqdDgFOx99oXhHl5FwvdsDwvygPxKfVMMdwXj6PtZ4rK7rjZU/48BGiJgcFUgHHl82qJn9nbW6FQXmJFIV0swHe4nu447T6nlmXHWnHuAAAAqJMHCgFOdoXwVGHeF/gz0/a3zgToCu/W5v3v62cKhPPeGAKcgofuawFCgOdyLgQ4FdETxd3S8kAsUAtT8+P2owUNc0VlLGjTYKIUAjQci9lRiLHDeQVO+32/EKDlytcTP+PCsYQAAAAAOIeHDAFai8VvXzgvF77XmgnQWAgJpiyFAF2gse43AUrLpkOA7hqL2/NunQ0BDv2PwjWW6se5QnFEEhicnNluoag8FvfxxCZCgGbNU1FemM1w7fMKHPe54nNJWbHv6RCg54rXE2ZcFP7Dz4UA42O3rvi9AgAAADwtDxsCtMap8e0/GRin5Z/zffzcUFCf++R8Ywiw+l8HyOyu/cPhU/hXCaa33/J58P2dDwEAAAAAYBsPHQKMvpM/+xWAzu7J+YVOTtvfEAJMFfsLIcDw2gvHH4ULcfZDYdYB70YhAAAAAIA9ecAQYDiV/1QkZ4HAysI89SYzAeJ5rw0HUkOhX77WcC2DfQoBHkEhAAAAAIA9eYgQIE7771xZxB4L5N6muN80CyA6UawX1y05CgEap74ScKn9OfkqwOMpBAAAAACwJw84E+DO3DwToHX4S/7F8GCl7fbjWQB8FIUA78HpBxbL+uE8AAAAPC9CgHsxzig49+sImd1shyvOKuC7KgQAAAAAsCdCAPKOFAIAAAAA2BMhAHlHCgEAAAAA7IkQgLwjhQAAAAAA9kQIQN6RQgAAAAAAeyIEIO9IIQAAAACAPRECkHekEAAAAADAnggByDtSCAAAAABgT4QA5B3ZNkiSJEmS3NNSLXKpQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAcgNvvxT04BIkiRJckdLtcilCgHIDbYNEgAAAAD2QghA3pFCAAAAAAB7IgQg78g8BGhfP5uHL/+nvzoAAAAA7007Ji/VIpcqBCA3GIrkhLR4fhaFAAAAAMDtaMfkpVrkUoUA5AZDkZyQFs/PohAAAAAAuB3tmLxUi1yqEIDcYCiSE9Li+VkUAgAAAAC3ox2Tl2qRSxUCkBsMRXJCWjw/i0IAAAAA4Ha0Y/JSLXKpQgByg6FITkiL585/P3z9e7/wyH8d3kbrNX79z8PvZunvf/n38bIbKgQAAAAAbkc7Ji/VIpcqBCA3GIrkhLR4fvvX7r1xUf8fhx+H/z58/Zq+19ltMxES3EghAAAAAHA72jF5qRa51BuEAN8Pn15eDh++/Cosewe/fzq8vHw4fPk1Xvbry4fDy4cvh1/Z++SUoUhOiIVzV8yXC/1Z//RfYT8//lRYdiOFAAAAAMDtaMfkpVrkUm8yEyAU2xOFeNlfhy8fXppt1vrp8L24n/lC/6wQ4NeXw4f2WJ++H75/6o776Xthveho/XOun/dqKJITQuHcF/KXTetvZwk0/Ot/FJbdRiEAAAAAcDvaMXmpFrnUfUKA8LS9K4wvdThToAsBVs0eCMeeCgFO++mCiPKxSw4L/D6UiIFBvN6mwB8e72Q8XrefbHs+rKFITmhfnzelvy/6k/Vf/+W/F7ePXzWI5IFDt49uRkG+bjrLYHrGQn9ef//Pw/8TAgAAAAA3ox2fl2qRS33XmQDhCXhaKM8W7KlXmgkQnsZPP4FfPRNg9JWC7isOS+HDYHk/M2B29gDv3rZBpqTF8+ugqJ5yHALEHwgsfyWgsP9+5kE6eyCGAC2n/cQfKUyK/qlZC8nXEswEAAAAAG5HOz4v1SKXunsI0BbWsdCdCwHaZdMF8ekJfnl54kywsFTkrw0BwnVk63VT/CeuIfkqQPp+aT98LNsGmRIL+G3T+ftivRAkTM0yyJ/oH0OA/DxG59eHCtl66XGEAAAAAMDtaMfnpVrkUvcNAfon7x++dMXvdAjQTs9v//9UEHCNmQD90/rk+LFwnzff18QPG4ZradbPCv3W4VcBEs+eUcB7s22QKdcJAWIRn0/TLxfsren0/9Lrk+N9jIOF4TpCAAAAAOB2tGPyUi1yqfuFAIXp7tMhQPe6K5Z3+sG8QpE+Op/c7PxO75XOsTDlf/b9xtFnJAR4NEORnDBXqJ9lHyYMpunHgGGG1SFA4esEx3X748TXQgAAAADgdrRj8lItcqn7hAB9cZs/LV8KAVq7IKB7Lz5B32SYbp/MJMhDgHz9kdPnF98bLsue+E98FaBzYlYBH8ZQJCecvnc//8N+awxP6NNi/YxZBmeFAFlw0W17On8hAAAAAHA72jF5qRa51F1CgFAMzz1hX7AtzodT57tiOZ9OX3yS338FIX1SH88nX7+4fWohpAjbTH2Pv1DwF4OBo304MXcOvGtDkZxwKqJLBfiZhif06VcCSgV82fNCgD5wCIV/H2IkQYMQAAAAALgd7Zi8VItc6j4zAYLnfo9/qlBujdPk1zoMAb5/6l7vHgKMpv73r5fWFwI8rKFITugK52vNBhg+oW/NfwBwynNDgGPg8Kd2tsFw/0IAAAAA4Ha0Y/JSLXKpO4YAJ7un4VPf9e8L/Nlfyd82EyBaDAEG4UHJc0KA7Mn/xNciTgoBHt1QJCfEwvlYbDeMCvEwrT8W2nG9cmAw+tG+4+8CZOu3RXwSFpwdAvTv//57s122TAgAAAAA3I52TF6qRS71XUKA1q7gzorz2e/Lp26bCRAthgBzx174zYLButHkmubDj9buuvwmwOMaiuSEWDgf7X90b8CgyJ4PAfIf6es8BQxHst8JOD8EOG0z+DHCRiEAAAAAcDvaMXmpFrnUdwsBWuNT8vafDIxfFZj+CsCyi0V85jVCgO69ucI+fiXgw+HD7FcBGvvAYMtnwNsaiuSEtHi+juPv6L+3QgAAAADgdrRj8lItcqnvGgKcCuTe2a8AdIZCPa5/rtn+iyFAabuBWQiwOMX/FHa0zj7lHwUKccbDzEwD3pWhSE5Ii+dr2T2hX/4dgL0UAgAAAAC3ox2Tl2qRS32HEGA4lf9UFGeBwOzT9bKLT/IziyHAuTMB4nmveMK/dE3h+IP9CAEezVAkJ6TF87MoBAAAAABuRzsmL9Uil7pLCJA+CV9d0IaCO27T2BTn657UL5gU2ceiPz/WGtNiffErASv0VYCnMBTJCWnx/CwKAQAAAIDb0Y7JS7XIpb7DTID7cfHJ/2qHv+pfDA1mbLcZzwLgIxqK5IS0eH4WhQAAAADA7WjH5KVa5FKrCgGuavKvABSXz9jNcNg4k4B3YSiSAQAAAGAnhADkHSkEAAAAALAnQgDyjhQCAAAAANgTIQB5RwoBAAAAAOyJEIC8I4UAAAAAAPZECEDekUIAAAAAAHsiBCDvSCEAAAAAgD0RApB3pBAAAAAAwJ4IAcg7sm2QJEmSJLmnpVrkUoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElWohCAJEmSJMlKFAKQJEmSJFmJQgCSJEmSJCtRCECSJEmSZCUKAUiSJEmSrEQhAEmSJEmSlSgEIEmSJEmyEoUAJEmSJElW4m4hwJ///GeSKy21oTWW9kWybKkNkeSlvvxTM4gmJyzdM3OW+i0yWrpntrhrCPC3v/2N5IJbGrZ2Rq5zjw6UZN2WCj8yWrpn5jSm45R7jGGEAOSN3dKwtTNynXt0oCTrNhZ7pb85rFchAK/tHmMYIQB5Y7c0bO2MXOceHSjJuhUCsKQQgNd2jzGMEIC8sVsatnZGrnOPDpRk3QoBWFIIwGu7xxhGCEDe2C0NWzsj17lHB0qyboUALCkE4LXdYwwjBCBv7JaGrZ2R69yjAyVZt0IAlhQC8NruMYYRApA3dkvD1s7Ide7RgZKsWyEASwoBeG33GMMIAcgbu6Vha2fkOvfoQEnWrRCAJYUAvLZ7jGGEAOSN3dKwtTNynXt0oCTrVgjAkkIAXts9xjBCAPLGbmnY2hm5zj06UJJ1KwRgSSEAr+0eYxghAHljtzRs7eyd/fn58MfLy+Hjt8Iy3rV7dKAk67amEODn5z8OLy8fD98KyzhUCMBru8cYRggw5c+fh5+j978dPr78cfj8M38/8dvH2T+S3z6+HF4+fju9p6io3i0N+2k6jEdpb815fm73efZAqL2Wl8Mfn38WljUuXAe3u0cHSrJuqwkB+r5zsg9b5Yo+/UkUAlzP4jjuj8/DMWNpDNW+l2734O4xhhECFO0G7KVBebgZ85svNbsR85s3f31Wshr23Z7XekvFTnfM8vplZ86v7xiO1xRfl5xojOEzqaRjKLmlYT9Hh3Gn7W3ShYK+ZDjP9B7v9nFsn9l1THpOe+s/t9rbV3SPDpRk3T5NCDA1vgx9zc/D5z8Ky3pXh+o/m34v7Of5+6PaQ4Dz64zM47jv5+HntzjO6cdI8T5Ka4rRGGp6XPmo7jGGEQJMGv/oZX+smkH3x+bGS4uSQaFxVlESb9JpB39cR4XEjH1xcPETz+hscdJ/RmmR1h+3VCB1xUhpWWE/FbmlYT9Lh3FP7S3ep5tMzuF4Hun9nbfl2XYWPa+9nay7fUX36EBJ1u3ThABHu34yHTt2feJ47Nm9n/dbsS+/0Cfpp2oPAYJhfDK8b0I4EP8bT4x7wjrZGOp4X+Xjufh6sK/nHPPsMYYRAqxwtihobsCwvHgj9tsmN3P6Ovz/c27SvHCY8z1CgNL5LBUl/fL0M0nf33y+D+iWhv1UHUbv3bS31rn7P7p4744HVYOOsHXNcS5pb9GK21d0jw6UZN0+XQgQ+opTX9Q90S2MO0v9UbArwBb7pIKjfvGBFQI0hntpeI8M/htn91q0Hautun/ScVP+/5/kPkrdYwwjBLjQ9Ea+qChJ/4Cm/79fr+ja9VrnBv1hP815rHbcSFuLRVV/3LkG3HUq43Mr7q8CtzTsZ29n0Zu0t+C4gB+ZncPy8vVPStLjXtreorW2r+geHSjJun22EGBYiLf9X9NXfm77sGHfNDb2qUKAViFAYz8+Gd0r+f01GIt198/ZDyyWxmFP4B5jGCFAweIfouyHy9JiY1B4ZDfiYFnyuv3f+Efy27dYpDTLGif/eCbrrPXshpQ72bC64mh0rquKkm7b9HMJhmOtLc6exy0N+xk6jLttb73ptiXzYw6NBX/ShkptarKdRbe0t95K21d0jw6UZN0+VwjQ9TOjcWPeP+WvQz9Ub99SUgjQWLgvhuO9QsGfb7M4Nupdu94Du8cYRghQ8OfPb/3APd6I+QB8mHQOioDsRswLhPmCoTOsU7qZw75X/qHti4PdQoCpc1lVlBQKo9ZrnfODuaVhP0OHcbftLTrVBlqX7tmw7XD/xXOaO0brpvbWW2n7iu7RgZKs26cKAY79VbTvc/L+KX8d+pZ03XQf5/sMfZQQoDG9L/r38oc+7XhoMH7J7q3T+DBZ75x7LH/A9MDuMYYRAsw4GKyHm66/mbPB9Hi9mcH8FtNzKC1PLQz4Q+NLG8cl9tfZ7atwnf1xl4qScuE18bTzyd3SsJ+pw7i79nZ0+r4szmI4GsOu5F4vtMvgwnUstbdRO20cn2+d7Su6RwdKsm6fJwQ49Vdd/9T2F+cU9ivHpu/SZ99eIUBjGJ8M74t8zJS/HozvUtMx4cp7aH589njuMYYRAqy2/wPZ3pzZDbhYlIT34h/KFU7dtGkjKC1PnSo2ZjynwYRrLq3bH/eyECD5jAfvP7dbGvbztbPoHbS31NJxFtrYsXBPt23/aZuPheOV9p+4tb111tm+ont0oCTr9llCgK6/6vrEcgiQ9E/560Kxd9pn1q8t9HXPohCgsR+fDMZbrelYJqwT74dujLI4nll5DwkBlhUCnGN6QycD6XVFybo/erM3bdjP1hBguhDo/mAX9l84/21FSX8Oo+3rLFK2NOynbGfRW7e3gfk9u/xUvT3P0P7WnM/COkKA7e7RgZKs2+cIAbq+4eO3rl+7VghQ7LfO6J8fWSFAY+G+GI+54r1XXr9ouIeae2uNq8Z3j+EeYxghwIyDYiN9r7mx0uJ6sF7pD1zxj165iFgOAfobe6XjEKCzdB1dCNC8n1xzfO+Pz98OP5OGWfzj3rqmKOnXGRcjQoBzfaYO4+7a28huHy8fP593nybnc2xja+3PbVN7OyoEKLUhkrzU5wgBotcMASb6m7Bt37+NXFEAPohCgMbCfVEac8X3PhfGgPk6YbviGG/seeO7+3ePMYwQYNLuD9hwcN3/UWv+WKXvv1tREvaz8o9kXxxMhQCd7TmczittiB+/xWstHy+sW2qEK4qSbtvSfsufybO7pWE/T4dxh+2tZNh3d07zbSuxeD6ZC+tsaW8n62xf0T06UJJ1W08I0PV702Zjuqm+aU1/+AQKARpXhgDxvmvvo/K4qh8Lzo37Cp49vrtz9xjDCAGmLBXR4cb74/Dx43BAflFREt4b3/SzN21//FJRPrJ0/hPGY347HjsWXzONbOpcloqS/rqLy88452dyS8N+mg7jHttbbnLvhnNo9xfPY87S+eQurROWX9DeUittX9E9OlCSdVtDCBD6ybSvy/ur0LcUir22j1zTPz+hQoDG5L443Q+JcewV7onCvXI0vS8bj+uvcO347gHcYwwjBJiy+EcuDra7G7I48C79gRu916deHz8Ob+zGtCgZFDutYT+FQqDk4oD/9JQ1Hm9YEGXJW+7g81jxfnK8yXMaXV/cJr639Pox3dKwn6bDuMf2Fg37a++z7Dj9ObbLiucWLZ1j7tI6Z7e3guEY9bWv6B4dKMm6fcYQoOvv4t/+rh8Y9DF5fxX6oXHf0n6NNPQhaSG2pj98AmsPAY4PSnrj/TOsMxrjOKoZe82PwZL7a+U9NDrWg7vHGEYIMGG4GY83T/+HMbmZws1VGhwv3Zzxhg/76vZbLoqn/vCuHJD3xxntO+yjOX5hWanBdNdZKjL6AiFvYPH6Sk4FCr3Dz7w1L0KWXj+mWxr2U3UYx//299Hejp1Yfo/npvd8ad01HdbiOvPtbdw+x9bavqJ7dKAk6/YZQ4BBHxn6mKwPyPurfJ3B8tiP9Ptd0x8+gbWHAFMO6oxwLzT3xrE26O+VrFYYjV1W3kOlmuaR3WMMIwQo2t2IYWB9HODnN1zzx/KP5r1scNwVDuOb81hQDP6YJsfJ1i/+MY4N5gzT7btCarrhhHOcKNRjGDBYHs7nSgVC/zmXC7TndkvDfo4O477aW9x2TWE9tO/A2uOO2sl0uwuuXufC9lZx+4ru0YGSrNvnCgHGhv4wL6Rif3Xsr9M+r+tLR/1nuu6C5/e996cQoGwszMOPALb/vUc1R3f/5PfT2WOqxrma5hHdYwwjBCiZDpjb/7+QJB0L5N74Byx9f3LwHW7m07YD85v3nCJg1aC/b1xHzy0w+qKnP8/BuZ9hu22xo6nELQ37KTqMe21v13JNh7WqU7usvbXr1ty+ont0oCTr9rlDgHaMeN648NkKr0sVApRNx2nTYU8y1unHbIMx3dR4qTC+m6+BHss9xjBCAG6zL+C2/NEPncalTzifwC0NWzurzAvaW+3tK7pHB0qybp87BOClCgF4bfcYwwgByBu7pWFrZ+Q69+hASdatEIAlhQC8tnuMYYQA5I3d0rC1M3Kde3SgJOtWCMCSQgBe2z3GMEIA8sZuadjaGbnOPTpQknUrBGBJIQCv7R5jGCEAeWO3NGztjFznHh0oyboVArCkEIDXdo8xjBCAvLFbGrZ2Rq5zjw6UZN0KAVhSCMBru8cYRghA3tgtDVs7I9e5RwdKsm6FACwpBOC13WMMIwQgb+yWhq2dkevcowMlWbdCAJYUAvDa7jGGEQKQN3ZLw9bOyHXu0YGSrFshAEsKAXht9xjDCAHIG7ulYWtn5Dr36EBJ1m0s9siSpXtmTmM6TrnHGGbXEIDkOkttaI2lfZEsW2pDJHmppcKPjJbumTlL/RYZLd0zW9wtBCBJkiRJkvelEIAkSZIkyUoUApAkSZIkWYlCAJIkSZIkK1EIQJIkSZJkJQoBSJIkSZKsRCEASZIkSZKVKAQgSZIkSbIShQAkSZIkSVaiEIAkSZIkySfzL3/5y9H0fSEASZIkSZJPphCAJEmSJMlKFAKQJEmSJFm5QgCSJEmSJB/c/Ml//joqBCBJkiRJ8sHNi/78dVQIQJIkSZLkg5sX/fnrqBCAJEmSJMlKFAKQJEmSJPlg5k/6l15HhQAkSZIkST6YeZG/9DoqBCBJkiRJ8sHMi/yl11EhAEmSJEmSlSgEIEmSJEmyEo8hAEmSJEmSfHb/7fD/AaFXv/jWXhr2AAAAAElFTkSuQmCC" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>打开控制面板-系统和安全-系统-高级系统设置-环境变量-系统变量-点击新建</p></div> <ul><li>双击<code>python的安装路径\Scripts\virtualenvwrapper.bat</code>文件
<img src="/pycms/assets/img/w5.950c74b3.png" alt=""></li> <li>以管理员身份重新打开命令行
<img src="/pycms/assets/img/cmd.9375d8a0.png" alt=""></li></ul></li> <li><p>Mac 安装</p> <ul><li>在终端执行以下命令</li></ul> <div class="language- extra-class"><pre class="language-text"><code>pip3 install virtualenvwrapper -i https://mirrors.aliyun.com/pypi/simple/ 
</code></pre></div><ul><li>配置</li></ul> <p>在<code>~/.bash_profile</code> 文件中添加如下配置</p> <div class="language-shell script extra-class"><pre class="language-text"><code>VIRTUALENVWRAPPER_PYTHON=&quot;/usr/local/bin/python3.7&quot;
export WORKON_HOME=$HOME/.virtualenvs
source  /Library/Frameworks/Python.framework/Versions/3.7/bin/virtualenvwrapper.sh
</code></pre></div><ul><li>激活<code>~/.bash_profile</code>文件</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>source ~/.bash_profile
</code></pre></div></li> <li><p>使用</p></li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>#1.创建虚拟环境
mkvirtualenv  虚拟环境名字 -p python可执行文件的路径
#2.查看当前的虚拟环境目录: 
workon
#3.切换虚拟环境目录:
workon 虚拟环境名字
#4.退出虚拟环境:
deactivate
#5.删除虚拟环境:
rmvirtualenv 虚拟环境名字
</code></pre></div><h2 id="初始化项目"><a href="#初始化项目" class="header-anchor">#</a> 初始化项目</h2> <h3 id="创建项目的虚拟环境"><a href="#创建项目的虚拟环境" class="header-anchor">#</a> 创建项目的虚拟环境</h3> <div class="language-shell script extra-class"><pre class="language-text"><code>mkvirtualenv pycms -p /usr/local/bin/python3.7
</code></pre></div><h3 id="在虚拟环境中安装django"><a href="#在虚拟环境中安装django" class="header-anchor">#</a> 在虚拟环境中安装django</h3> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 install django==2.2 -i https://mirrors.aliyun.com/pypi/simple/
</code></pre></div><h3 id="查看django"><a href="#查看django" class="header-anchor">#</a> 查看django</h3> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 list
</code></pre></div><h3 id="用pycharm新建django项目"><a href="#用pycharm新建django项目" class="header-anchor">#</a> 用pycharm新建django项目</h3> <ul><li>在新建面板的左侧选择django项目</li> <li>在Location中指定项目所在的位置</li> <li>在Existing interpreter 中指定项目的python解释器
<ul><li>在Virtualenv Environment中的Interpreter 中选择创建的虚拟环境python所在的路径</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>一般Windows用的这个路径为 <code>虚拟环境存放目录\虚拟环境名称\Scripts\python.exe</code></li> <li>一般Mac用户的这个路径为 <code>用户名/.virtualenvs/虚拟环境名称/bin/python</code></li></ul></div></li> <li>选中Enable Django admin</li></ul> <p><img src="/pycms/assets/img/new-project.582ede2e.png" alt=""></p> <ul><li>打开 Run-&gt;Run 'project' 运行项目来测试django是否安装成功</li> <li>django 参考文档:
<a href="https://www.djangoproject.com/" target="_blank" rel="noopener noreferrer">Djano 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://docs.djangoproject.com/zh-hans/2.2/" target="_blank" rel="noopener noreferrer">Djano 中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="完善项目目录结构"><a href="#完善项目目录结构" class="header-anchor">#</a> 完善项目目录结构</h3> <ul><li>在项目目录下新建media文件夹用来存放上传资源</li> <li>在项目目录下新建static文件夹用来存放静态资源</li> <li>在项目目录下新建apps包用来存放应用</li></ul> <h3 id="pycharm-创建django应用"><a href="#pycharm-创建django应用" class="header-anchor">#</a> pycharm 创建django应用</h3> <ul><li>打开 Tools-&gt;Run manage.py task</li> <li>在终端执行</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>startapp 应用名称
</code></pre></div><ul><li>将应用拖到apps包中</li> <li>在settings.py中配置应用</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>
    <span class="token string">'apps.basic.apps.BasicConfig'</span><span class="token punctuation">,</span><span class="token comment">#配置应用</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="django项目目录结构解析"><a href="#django项目目录结构解析" class="header-anchor">#</a> django项目目录结构解析</h3> <p><img src="/pycms/assets/img/django-org.bd032d9a.png" alt=""></p> <h2 id="web原理解析和mvc介绍"><a href="#web原理解析和mvc介绍" class="header-anchor">#</a> WEB原理解析和MVC介绍</h2> <h3 id="web原理解析"><a href="#web原理解析" class="header-anchor">#</a> WEB原理解析</h3> <p><img src="/pycms/assets/img/web.5555aa74.png" alt=""></p> <ul><li>客户端用户发送请求</li> <li>服务器解析请求,计算数据并返回给客户端</li> <li>客户端解析返回的数据</li></ul> <h3 id="mvc介绍"><a href="#mvc介绍" class="header-anchor">#</a> MVC介绍</h3> <p><img src="/pycms/assets/img/mvc.404f3c87.png" alt=""></p> <ul><li>客户端用户发送请求</li> <li>模型框架负责路由解析,根据路由寻找对应的控制器(Controller)和行为(action)</li> <li>行为(action)调用相关的模型(Model)进行数据操作</li> <li>行为(action)根据数据操作的结果调用视图(View)进行页面的渲染,输出到客户端</li></ul> <h2 id="静态页面路由配置"><a href="#静态页面路由配置" class="header-anchor">#</a> 静态页面路由配置</h2> <h3 id="添加view类"><a href="#添加view类" class="header-anchor">#</a> 添加View类</h3> <p>在<code>apps.basic.views</code>添加处理路由的View</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>generic <span class="token keyword">import</span> View

<span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Django中view分为CBV(class base view)和FBV(function base view),推荐CBV</p></div> <h3 id="添加html页面"><a href="#添加html页面" class="header-anchor">#</a> 添加html页面</h3> <p>在templates文件夹新新建一个<code>index.html</code>静态页面</p> <h3 id="配置路由"><a href="#配置路由" class="header-anchor">#</a> 配置路由</h3> <p>在urls.py文件中添加</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> apps<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>views <span class="token keyword">import</span> IndexView

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">#首页路由</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="静态资源处理"><a href="#静态资源处理" class="header-anchor">#</a> 静态资源处理</h2> <h3 id="在html页面中使用静态资源"><a href="#在html页面中使用静态资源" class="header-anchor">#</a> 在html页面中使用静态资源</h3> <p>copy前端准备好的模版文件(html)到templates文件夹中</p> <h3 id="添加静态资源"><a href="#添加静态资源" class="header-anchor">#</a> 添加静态资源</h3> <p>copy前端准备好的静态资源文(css,js,image)件到static文件中</p> <h3 id="配置静态文件查找路径配置"><a href="#配置静态文件查找路径配置" class="header-anchor">#</a> 配置静态文件查找路径配置</h3> <p>在settings.py中添加如下配置</p> <div class="language-python extra-class"><pre class="language-python"><code>STATICFILES_DIRS <span class="token operator">=</span> <span class="token punctuation">[</span>
    os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'static'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="修改html中静态资源的引用"><a href="#修改html中静态资源的引用" class="header-anchor">#</a> 修改html中静态资源的引用</h3> <p>举例:</p> <div class="language-html extra-class"><pre class="language-html"><code>{% load staticfiles %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% static 'layui/css/layui.css' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="模版的使用"><a href="#模版的使用" class="header-anchor">#</a> 模版的使用</h2> <h3 id="定义模版"><a href="#定义模版" class="header-anchor">#</a> 定义模版</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--base.html--&gt;</span>
{% block 名称 %}

{% endblock %}
</code></pre></div><h3 id="继承并且填充模版"><a href="#继承并且填充模版" class="header-anchor">#</a> 继承并且填充模版</h3> <div class="language-html extra-class"><pre class="language-html"><code>{% extends 'base.html' %}
{% load staticfiles %}
{% block 名称 %}
内容
{% endblock %}
</code></pre></div><h2 id="配置其他路由和跳转"><a href="#配置其他路由和跳转" class="header-anchor">#</a> 配置其他路由和跳转</h2> <h3 id="view类"><a href="#view类" class="header-anchor">#</a> View类</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ProductView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'product.html'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">NewsView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'news.html'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AboutView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'about.html'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">NewsDetailView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span>news_id<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'newsDetail.html'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="配置路由-2"><a href="#配置路由-2" class="header-anchor">#</a> 配置路由</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path
<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> apps<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>views <span class="token keyword">import</span> IndexView<span class="token punctuation">,</span>ProductView<span class="token punctuation">,</span>NewsView<span class="token punctuation">,</span>AboutView<span class="token punctuation">,</span>NewsDetailView
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'product/'</span><span class="token punctuation">,</span> ProductView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'news/'</span><span class="token punctuation">,</span> NewsView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;news&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'about/'</span><span class="token punctuation">,</span> AboutView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^detail/(?P&lt;news_id&gt;\d+)/$'</span><span class="token punctuation">,</span> NewsDetailView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意detail路由的配置是为了传递参数到view中</p></div> <h3 id="配置跳转"><a href="#配置跳转" class="header-anchor">#</a> 配置跳转</h3> <ul><li>直接跳转</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item layui-this<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'index' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'product' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>产品<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'news' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>动态<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'about' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>带参数的跳转</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'detail' '123456' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="记录导航选中状态"><a href="#记录导航选中状态" class="header-anchor">#</a> 记录导航选中状态</h3> <ul><li>在view中传递当前页面标识到模版</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">'currentPage'</span><span class="token punctuation">:</span><span class="token string">'index'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ProductView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'product.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">'currentPage'</span><span class="token punctuation">:</span> <span class="token string">'product'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><ul><li>在模版中根据标识设置class</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item {% ifequal currentPage 'index' %}layui-this{% endifequal %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'index' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item {% ifequal currentPage 'product' %}layui-this{% endifequal %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'product' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>产品<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item {% ifequal currentPage 'news' %}layui-this{% endifequal %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'news' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>动态<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-nav-item {% ifequal currentPage 'about' %}layui-this{% endifequal %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'about' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="模型定义"><a href="#模型定义" class="header-anchor">#</a> 模型定义</h2> <h3 id="安装pillow"><a href="#安装pillow" class="header-anchor">#</a> 安装Pillow</h3> <p>由于模型中需要定以图片的上传,所以需要安装</p> <div class="language-shell script extra-class"><pre class="language-text"><code>pip install Pillow -i https://mirrors.aliyun.com/pypi/simple/ 
</code></pre></div><h3 id="定义共同父类"><a href="#定义共同父类" class="header-anchor">#</a> 定义共同父类</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token comment"># 定义共同类</span>
<span class="token keyword">class</span> <span class="token class-name">BaseModel</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    add_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;添加时间&quot;</span><span class="token punctuation">,</span>default<span class="token operator">=</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        abstract <span class="token operator">=</span> <span class="token boolean">True</span> <span class="token comment">#不生成表</span>
</code></pre></div><h3 id="定义站点配置模型"><a href="#定义站点配置模型" class="header-anchor">#</a> 定义站点配置模型</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Config</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;站点名称&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    logo <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;站点logo&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">&quot;config/logo/%Y/%m&quot;</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;站点连接&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    wx_qr_code <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;微信二维码&quot;</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span>upload_to<span class="token operator">=</span><span class="token string">&quot;config/wx/%Y/%m&quot;</span><span class="token punctuation">)</span>
    tel <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;联系电话&quot;</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
    hours <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;营业时间&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">)</span>
    mail <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;电子邮件&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    icp <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;备案号&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;站点配置&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name
</code></pre></div><h3 id="数据库表操作和创建管理员"><a href="#数据库表操作和创建管理员" class="header-anchor">#</a> 数据库表操作和创建管理员</h3> <ul><li><p>打开Tools-&gt;Run manage.py task</p></li> <li><p>生成表迁移</p></li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>makemigrations
</code></pre></div><ul><li>将表迁移同步到数据库</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>migrate
</code></pre></div><ul><li>创建超级用户</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>createsuperuser
</code></pre></div><h2 id="后台管理配置"><a href="#后台管理配置" class="header-anchor">#</a> 后台管理配置</h2> <h3 id="注册模型"><a href="#注册模型" class="header-anchor">#</a> 注册模型</h3> <p>在应用的<code>admin.py</code>文件中</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#admin.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> apps<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>models <span class="token keyword">import</span> Config
<span class="token keyword">class</span> <span class="token class-name">ConfigAdmin</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>ModelAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Config<span class="token punctuation">,</span>ConfigAdmin<span class="token punctuation">)</span>
</code></pre></div><h3 id="配置中文和时区"><a href="#配置中文和时区" class="header-anchor">#</a> 配置中文和时区</h3> <p>在<code>settings.py</code>中配置中文和时区</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#settings.py</span>
LANGUAGE_CODE <span class="token operator">=</span> <span class="token string">'zh-hans'</span>
TIME_ZONE <span class="token operator">=</span> <span class="token string">'Asia/Shanghai'</span>
USE_TZ <span class="token operator">=</span> <span class="token boolean">False</span>
</code></pre></div><h3 id="修改网页title和站点header"><a href="#修改网页title和站点header" class="header-anchor">#</a> 修改网页title和站点header</h3> <p>在应用的<code>admin.py</code>文件中</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#admin.py</span>
<span class="token comment">#修改网页title和站点header</span>
admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>site_title <span class="token operator">=</span> <span class="token string">&quot;PyCMS后台管理&quot;</span>
admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>site_header <span class="token operator">=</span> <span class="token string">&quot;PyCMS&quot;</span>
</code></pre></div><h3 id="修改应用的中文名称"><a href="#修改应用的中文名称" class="header-anchor">#</a> 修改应用的中文名称</h3> <p>在应用的<code>apps.py</code>文件中修改应用的中文名称</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#apps.py</span>
<span class="token keyword">class</span> <span class="token class-name">BasicConfig</span><span class="token punctuation">(</span>AppConfig<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'apps.basic'</span>
    verbose_name <span class="token operator">=</span> <span class="token string">&quot;站点基本&quot;</span>
</code></pre></div><h3 id="配置上传资源路径"><a href="#配置上传资源路径" class="header-anchor">#</a> 配置上传资源路径</h3> <p>在<code>settings.py</code>中配置上传资源路径</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#settings.py</span>
MEDIA_URL <span class="token operator">=</span> <span class="token string">&quot;/media/&quot;</span>
MEDIA_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'media'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="自定义表单"><a href="#自定义表单" class="header-anchor">#</a> 自定义表单</h3> <p>在应用的<code>admin.py</code>文件中,在管理器类中添加 <code>fields</code> 属性来定义表单要显示的字段</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#admin.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> apps<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>models <span class="token keyword">import</span> Config
<span class="token keyword">class</span> <span class="token class-name">ConfigAdmin</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>ModelAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span>
    fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'logo'</span><span class="token punctuation">,</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token string">'wx_qr_code'</span><span class="token punctuation">,</span><span class="token string">'tel'</span><span class="token punctuation">,</span><span class="token string">'hours'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">,</span><span class="token string">'icp'</span><span class="token punctuation">)</span>
<span class="token comment"># Register your models here.</span>
admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Config<span class="token punctuation">,</span>ConfigAdmin<span class="token punctuation">)</span>
</code></pre></div><h3 id="列表显示"><a href="#列表显示" class="header-anchor">#</a> 列表显示</h3> <p>在应用的<code>admin.py</code>文件中,在管理器类中添加 <code>list_display</code> 属性来定义列表要显示的字段</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#admin.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> apps<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>models <span class="token keyword">import</span> Config
<span class="token keyword">class</span> <span class="token class-name">ConfigAdmin</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>ModelAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span>
    fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'logo'</span><span class="token punctuation">,</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token string">'wx_qr_code'</span><span class="token punctuation">,</span><span class="token string">'tel'</span><span class="token punctuation">,</span><span class="token string">'hours'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">,</span><span class="token string">'icp'</span><span class="token punctuation">)</span>
    list_display <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token string">'tel'</span><span class="token punctuation">,</span><span class="token string">'hours'</span><span class="token punctuation">,</span><span class="token string">'mail'</span><span class="token punctuation">,</span><span class="token string">'icp'</span><span class="token punctuation">)</span>
<span class="token comment"># Register your models here.</span>
admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Config<span class="token punctuation">,</span>ConfigAdmin<span class="token punctuation">)</span>
</code></pre></div><h3 id="admin登陆添加验证码"><a href="#admin登陆添加验证码" class="header-anchor">#</a> admin登陆添加验证码</h3> <ul><li>安装依赖</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 install django-multi-captcha-admin
pip3 install django-simple-captcha
</code></pre></div><ul><li>配置</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#settings.py</span>
INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'multi_captcha_admin'</span><span class="token punctuation">,</span><span class="token comment">#需要在django.contrib.admin前添加</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">'captcha'</span><span class="token punctuation">,</span><span class="token comment">#验证码模块</span>
<span class="token punctuation">]</span>
MULTI_CAPTCHA_ADMIN <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'engine'</span><span class="token punctuation">:</span> <span class="token string">'simple-captcha'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>添加路由</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#urls.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
url<span class="token punctuation">(</span><span class="token string">r'^captcha/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'captcha.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>数据迁移</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>migrate
</code></pre></div><h2 id="分配数据到模版展示"><a href="#分配数据到模版展示" class="header-anchor">#</a> 分配数据到模版展示</h2> <h3 id="获取和分配数据-objects-get-获取一条"><a href="#获取和分配数据-objects-get-获取一条" class="header-anchor">#</a> 获取和分配数据(<code>objects.get()</code>获取一条)</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># views.py</span>
<span class="token keyword">from</span> apps<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>models <span class="token keyword">import</span> Config
<span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取一条数据对象</span>
        config <span class="token operator">=</span> Config<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">'currentPage'</span><span class="token punctuation">:</span><span class="token string">'index'</span><span class="token punctuation">,</span>
            <span class="token string">'config'</span><span class="token punctuation">:</span>config <span class="token comment">#将对象分配到模版</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="展示数据"><a href="#展示数据" class="header-anchor">#</a> 展示数据</h3> <ul><li>普通数据展示</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--base.html--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>contact-top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-icon layui-icon-cellphone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>{{ config.tel }}({{ config.hours }})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>上传图片数据展示
<ul><li>模版中使用</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--base.html--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-col-sm2 layui-col-lg1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ config.wx_qr_code.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>在urls.py中配置上传文件请求路由</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># urls.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>static <span class="token keyword">import</span> serve
<span class="token keyword">from</span> project<span class="token punctuation">.</span>settings <span class="token keyword">import</span> MEDIA_ROOT
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    
  <span class="token comment"># 上传文件访问的路由配置</span>
  url<span class="token punctuation">(</span><span class="token string">r'^media/(?P&lt;path&gt;.*)$'</span><span class="token punctuation">,</span> serve<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;document_root&quot;</span><span class="token punctuation">:</span> MEDIA_ROOT<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul> <h2 id="友情连接"><a href="#友情连接" class="header-anchor">#</a> 友情连接</h2> <h3 id="模型定义-2"><a href="#模型定义-2" class="header-anchor">#</a> 模型定义</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Link</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;友情连接名称&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;友情连接地址&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;友情连接&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>模型注册,表迁移,数据同步参考站点配置模型</p></div> <h3 id="获取和分配数据-objects-all-获取所有"><a href="#获取和分配数据-objects-all-获取所有" class="header-anchor">#</a> 获取和分配数据(<code>objects.all()</code>获取所有)</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#views.py</span>
<span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取一条数据对象</span>
        config <span class="token operator">=</span> Config<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取友情链接</span>
        links <span class="token operator">=</span> Link<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">'currentPage'</span><span class="token punctuation">:</span><span class="token string">'index'</span><span class="token punctuation">,</span>
            <span class="token string">'config'</span><span class="token punctuation">:</span>config<span class="token punctuation">,</span> <span class="token comment">#将对象分配到模版</span>
            <span class="token string">'links'</span><span class="token punctuation">:</span>links
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="展示数据-2"><a href="#展示数据-2" class="header-anchor">#</a> 展示数据</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--base.html--&gt;</span>
{% for link in links %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ link.url }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ link.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{% endfor %}
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Link.objects.all()</code>返回的是一个<code>QuerySet</code>,需要在模版中通过<code>for in</code>来遍历得到每一对象</p></div> <h2 id="首页轮播图"><a href="#首页轮播图" class="header-anchor">#</a> 首页轮播图</h2> <h3 id="模型定义-3"><a href="#模型定义-3" class="header-anchor">#</a> 模型定义</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Carousel</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;轮播图名称&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;轮播图图片&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">&quot;carousel/%Y/%m&quot;</span><span class="token punctuation">)</span>
    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;轮播图描述&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;首页轮播图&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>title
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>模型注册,表迁移,数据同步,获取和分配数数据,展示数据 参考友情链接模型</p></div> <h2 id="产品"><a href="#产品" class="header-anchor">#</a> 产品</h2> <h3 id="模型定义-4"><a href="#模型定义-4" class="header-anchor">#</a> 模型定义</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;产品名称&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;产品描述&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    icon <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;产品图标&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">&quot;product/icon/%Y/%m&quot;</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;产品连接&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;产品封面&quot;</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span>upload_to<span class="token operator">=</span><span class="token string">&quot;product/post/%Y/%m&quot;</span><span class="token punctuation">)</span>
    is_show_index <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;是否显示在首页&quot;</span><span class="token punctuation">,</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;产品&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name
</code></pre></div><h3 id="数据获取-filter筛选"><a href="#数据获取-filter筛选" class="header-anchor">#</a> 数据获取(<code>filter</code>筛选)</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#views.py</span>
<span class="token comment"># 获取首页需要的产品</span>
products <span class="token operator">=</span> Product<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>is_show_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>模型注册,表迁移,数据同步,分配数数据,展示数据 参考友情链接模型</li> <li>数据获取使用<code>filter</code>进行筛选,<code>filter</code>返回结果也是一个QuerySet,在模版中需要用<code>for in</code></li></ul></div> <h2 id="服务"><a href="#服务" class="header-anchor">#</a> 服务</h2> <h3 id="模型定义-5"><a href="#模型定义-5" class="header-anchor">#</a> 模型定义</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 服务</span>
<span class="token keyword">class</span> <span class="token class-name">Service</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;服务名称&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;服务描述&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;服务封面&quot;</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span>upload_to<span class="token operator">=</span><span class="token string">&quot;service/post/%Y/%m&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;服务&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>模型注册,表迁移,数据同步,获取和分配数数据,展示数据 参考友情链接模型</p></div> <h2 id="产品页面开发"><a href="#产品页面开发" class="header-anchor">#</a> 产品页面开发</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>参考首页开发</p></div> <h2 id="动态页面开发"><a href="#动态页面开发" class="header-anchor">#</a> 动态页面开发</h2> <h3 id="动态模型"><a href="#动态模型" class="header-anchor">#</a> 动态模型</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">News</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;动态标题&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;动态描述&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    intro <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;动态简介&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    content <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;动态内容&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    read_nums <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;阅读人数&quot;</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    post <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;封面图片&quot;</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span>upload_to<span class="token operator">=</span><span class="token string">&quot;news/post/%Y/%m&quot;</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;详情图片&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">&quot;news/detail/%Y/%m&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;动态&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name
</code></pre></div><h3 id="安装分页应用"><a href="#安装分页应用" class="header-anchor">#</a> 安装分页应用</h3> <ul><li>参考 <a href="https://github.com/jamespacileo/django-pure-pagination" target="_blank" rel="noopener noreferrer">django-pure-pagination<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>在虚拟环境中安装</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 install django-pure-pagination
</code></pre></div><ul><li>在settings.py中INSTALLED_APPS配置</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#settings.py</span>
INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">'pure_pagination'</span><span class="token punctuation">,</span><span class="token comment">#分页配置</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>在settings.py中配置分页参数</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#settings.py</span>
<span class="token comment"># 分页相关配置</span>
PAGINATION_SETTINGS <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'PAGE_RANGE_DISPLAYED'</span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token string">'MARGIN_PAGES_DISPLAYED'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">'SHOW_FIRST_PAGE_WHEN_INVALID'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在views-py中使用分页应用"><a href="#在views-py中使用分页应用" class="header-anchor">#</a> 在views.py中使用分页应用</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> pure_pagination <span class="token keyword">import</span> Paginator<span class="token punctuation">,</span> EmptyPage<span class="token punctuation">,</span> PageNotAnInteger

<span class="token keyword">class</span> <span class="token class-name">NewsView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取一条数据对象</span>
        config <span class="token operator">=</span> Config<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取友情链接</span>
        links <span class="token operator">=</span> Link<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 按添加时间倒序获取所有的动态</span>
        all_news <span class="token operator">=</span> News<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">&quot;-add_time&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> PageNotAnInteger<span class="token punctuation">:</span>
            page <span class="token operator">=</span> <span class="token number">1</span>

        p <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>all_news<span class="token punctuation">,</span> per_page<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> request<span class="token operator">=</span>request<span class="token punctuation">)</span>

        news <span class="token operator">=</span> p<span class="token punctuation">.</span>page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'news.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">'currentPage'</span><span class="token punctuation">:</span> <span class="token string">'news'</span><span class="token punctuation">,</span>
            <span class="token string">'config'</span><span class="token punctuation">:</span> config<span class="token punctuation">,</span>
            <span class="token string">'links'</span><span class="token punctuation">:</span> links<span class="token punctuation">,</span>
            <span class="token string">'news'</span><span class="token punctuation">:</span>news
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><code>objects.order_by()</code>是排序</li> <li>以上代码生成的<code>news</code>是一个分页对象</li></ul></div> <h3 id="在模版中使用分页"><a href="#在模版中使用分页" class="header-anchor">#</a> 在模版中使用分页</h3> <ul><li>动态遍历</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>    {% for item in news.object_list %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-col-lg6 content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>news-img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'detail' item.id %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ item.post.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>news-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'detail' item.id %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item.desc }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% url 'detail' item.id %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>[详细]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>read-push<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>阅读 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item.read_nums }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token entity" title="&amp;nbsp;">&amp;nbsp;</span><span class="token entity" title="&amp;nbsp;">&amp;nbsp;</span><span class="token entity" title="&amp;nbsp;">&amp;nbsp;</span><span class="token entity" title="&amp;nbsp;">&amp;nbsp;</span>发布时间：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item.add_time }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>分页对象需要遍历对象上的<code>object_list</code></p></div> <ul><li>分页器渲染</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-box layui-laypage layui-laypage-molv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-laypage-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {% if news.has_previous %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>?{{ news.previous_page_number.querystring }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-laypage-next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>上一页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        {% endif %}
        {% for page in news.pages %}
            {% if page %}
                {% ifequal page news.number %}
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-laypage-curr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-laypage-em<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span>#2db5a3<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>{{ page }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                {% else %}
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>?{{ page.querystring }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ page }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                {% endifequal %}
            {% else %}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            {% endif %}
        {% endfor %}
        {% if news.has_next %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>?{{ news.next_page_number.querystring }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-laypage-next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>下一页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        {% endif %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="动态详情页面开发"><a href="#动态详情页面开发" class="header-anchor">#</a> 动态详情页面开发</h2> <h3 id="获取动态并分配给模版"><a href="#获取动态并分配给模版" class="header-anchor">#</a> 获取动态并分配给模版</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">NewsDetailView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span>news_id<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取一条数据对象</span>
        config <span class="token operator">=</span> Config<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取友情链接</span>
        links <span class="token operator">=</span> Link<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取动态</span>
        news <span class="token operator">=</span> News<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>news_id<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 修改动态的阅读人数</span>
        news<span class="token punctuation">.</span>read_nums <span class="token operator">+=</span> <span class="token number">1</span>
        news<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'newsDetail.html'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">'currentPage'</span><span class="token punctuation">:</span> <span class="token string">'news'</span><span class="token punctuation">,</span>
            <span class="token string">'config'</span><span class="token punctuation">:</span> config<span class="token punctuation">,</span>
            <span class="token string">'links'</span><span class="token punctuation">:</span> links<span class="token punctuation">,</span>
            <span class="token string">'news'</span><span class="token punctuation">:</span>news
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><code>objects.get(id=int(news_id))</code>是根据id获取数据</li> <li>模版数据展示参考之前模型</li></ul></div> <h2 id="关于我们页面开发"><a href="#关于我们页面开发" class="header-anchor">#</a> 关于我们页面开发</h2> <h3 id="定义模型"><a href="#定义模型" class="header-anchor">#</a> 定义模型</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 公司简介</span>
<span class="token keyword">class</span> <span class="token class-name">Intro</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    content <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;简介内容&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;简介图片&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">&quot;intro/%Y/%m&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;公司简介&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>content
<span class="token comment"># 发展历程</span>
<span class="token keyword">class</span> <span class="token class-name">Timeline</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    label <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;历程标签&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;历程描述&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&quot;历程图片&quot;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> upload_to<span class="token operator">=</span><span class="token string">&quot;timeline/%Y/%m&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&quot;发展历程&quot;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>label
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>模型注册,表迁移,数据同步,获取和分配数数据, 参考友情链接模型</p></div> <h3 id="数据展示"><a href="#数据展示" class="header-anchor">#</a> 数据展示</h3> <div class="language-html extra-class"><pre class="language-html"><code>{% for intro in intros %}
  {% if forloop.counter|divisibleby:2 %}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-inline panel p_block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ intro.content }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-inline img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ intro.image.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>p_hidden<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ intro.content }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  {% else %}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-inline img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ intro.image.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>layui-inline panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ intro.content }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  {% endif %}
{% endfor %}

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>timeline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
{% for timeline in timelines %}
  {% if forloop.counter|divisibleby:2 %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cour-img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ timeline.image.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cour-panel layui-col-sm4 layui-col-sm-offset8 layui-col-lg5 layui-col-lg-offset7<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ timeline.label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ timeline.desc }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  {% else %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>odd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cour-img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ timeline.image.url }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cour-panel layui-col-sm4 layui-col-lg5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ timeline.label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ timeline.desc }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  {% endif %}
{% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>odd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cour-img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{% static '/img/us_img8.png' %}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>在模版中遍历时可以用<code>{% if forloop.counter|divisibleby:2 %}</code>来判断当前是否是偶数</li></ul></div> <h2 id="配置错误页面"><a href="#配置错误页面" class="header-anchor">#</a> 配置错误页面</h2> <h3 id="准备相关的错误页面"><a href="#准备相关的错误页面" class="header-anchor">#</a> 准备相关的错误页面</h3> <ul><li>404.html</li></ul> <h3 id="修改settings-py文件"><a href="#修改settings-py文件" class="header-anchor">#</a> 修改settings.py文件</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 开发环境配置</span>
<span class="token comment"># DEBUG = True</span>
<span class="token comment"># ALLOWED_HOSTS = []</span>

<span class="token comment"># 线上环境配置</span>
DEBUG <span class="token operator">=</span> <span class="token boolean">False</span>
ALLOWED_HOSTS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span>

<span class="token comment"># 开发环境配置,静态文件查找路径配置</span>
<span class="token comment"># STATICFILES_DIRS = [</span>
<span class="token comment">#     os.path.join(BASE_DIR, 'static'),</span>
<span class="token comment"># ]</span>

<span class="token comment"># 线上环境配置</span>
STATIC_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'static'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="修改urls-py文件"><a href="#修改urls-py文件" class="header-anchor">#</a> 修改urls.py文件</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> project<span class="token punctuation">.</span>settings <span class="token keyword">import</span> STATIC_ROOT
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment"># 静态资源访问的路由配置(线上配置only)</span>
    url<span class="token punctuation">(</span><span class="token string">r'^static/(?P&lt;path&gt;.*)$'</span><span class="token punctuation">,</span> serve<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;document_root&quot;</span><span class="token punctuation">:</span> STATIC_ROOT<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="收集静态文件"><a href="#收集静态文件" class="header-anchor">#</a> 收集静态文件</h3> <p>打开Tools-&gt;Run manage.py task,执行以下指令</p> <div class="language-shell extra-class"><pre class="language-text"><code>collectstatic
</code></pre></div><h3 id="收集项目所需依赖文件"><a href="#收集项目所需依赖文件" class="header-anchor">#</a> 收集项目所需依赖文件</h3> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 freeze &gt; requirements.txt
</code></pre></div><h2 id="部署上线"><a href="#部署上线" class="header-anchor">#</a> 部署上线</h2> <h3 id="购买云服务器-以阿里云为例"><a href="#购买云服务器-以阿里云为例" class="header-anchor">#</a> 购买云服务器(以阿里云为例)</h3> <ul><li>购买时操作系统选择CentOS 7.7 64位</li> <li>记录远程连接密码,在远程连接时用</li> <li>重置实例密码,该密码是登陆系统时使用</li></ul> <h3 id="开放云服务器的端口"><a href="#开放云服务器的端口" class="header-anchor">#</a> 开放云服务器的端口</h3> <p>在云服务器对应的实例中安全组规则中添加</p> <div class="language- extra-class"><pre class="language-text"><code>允许	自定义 TCP	80/80	    IPv4地址段访问	0.0.0.0/0 
允许	自定义 TCP	8000/8000	IPv4地址段访问	0.0.0.0/0 
</code></pre></div><h3 id="登陆服务器"><a href="#登陆服务器" class="header-anchor">#</a> 登陆服务器</h3> <ul><li>方法一:远程连接后登陆系统,用户名:root 密码:重置的实例密码</li> <li>方法二(推荐):在本机终端通过 ssh root@服务器公共ip 登陆,登陆需要输入实例密码,注意windows用户需要安装xshell</li></ul> <h3 id="用pycharm上传代码"><a href="#用pycharm上传代码" class="header-anchor">#</a> 用pycharm上传代码</h3> <ul><li>Tools-&gt;Deployment-&gt;Configuration...</li> <li>Add-&gt;SFTP</li> <li>配置Connection连接远程服务器</li> <li>配置Mappings,本地项目的文件和远程服务的目录对应,注意远程服务器的目录需要自己建立</li> <li>右击需要上传的项目目录-&gt;deployment-&gt;upload,注意如果只上传某一个文件或目录则只右击需要上传的文件或者目录</li></ul> <h3 id="环境安装"><a href="#环境安装" class="header-anchor">#</a> 环境安装</h3> <h4 id="安装python3-7"><a href="#安装python3-7" class="header-anchor">#</a> 安装python3.7</h4> <ul><li>1.安装依赖</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>yum install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel gcc gcc-c++ openssl-devel libffi-devel python-devel mariadb-devel
</code></pre></div><ul><li>2.下载源码</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>wget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tgz 
tar -xzvf Python-3.7.3.tgz -C /tmp 
cd /tmp/Python-3.7.3/ 
</code></pre></div><ul><li>3.把Python3.7安装到 /usr/local 目录</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>./configure --prefix=/usr/local
make
make install   #这一步比较耗时
</code></pre></div><ul><li>4.更改/usr/bin/python链接</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>ln -s /usr/local/bin/python3.7 /usr/bin/python3
ln -s /usr/local/bin/pip3.7 /usr/bin/pip3
</code></pre></div><h4 id="安装新版sqlite"><a href="#安装新版sqlite" class="header-anchor">#</a> 安装新版sqlite</h4> <ul><li>1.下载源码</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>wget https://www.sqlite.org/2019/sqlite-autoconf-3270200.tar.gz
tar -zxvf sqlite-autoconf-3270200.tar.gz -C /tmp 
cd /tmp/sqlite-autoconf-3270200/ 
</code></pre></div><ul><li>2.把sqlite安装到 /usr/local 目录</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>./configure --prefix=/usr/local
make
make install   #这一步比较耗时
</code></pre></div><ul><li>3.建立软链接</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>#如果文件已经存在则备份
mv /usr/bin/sqlite3 /usr/bin/sqlite3_old
#建立软链接
ln -s /usr/local/bin/sqlite3   /usr/bin/sqlite3
</code></pre></div><ul><li>4.修改 <code>~/.bashrc</code>文件</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>export LD_LIBRARY_PATH=&quot;/usr/local/lib&quot;
</code></pre></div><ul><li>5.从新加载<code>~/.bashrc</code>文件</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>source  ~/.bashrc
</code></pre></div><h4 id="安装virtualenvwrapper"><a href="#安装virtualenvwrapper" class="header-anchor">#</a> 安装virtualenvwrapper</h4> <ul><li>1.安装</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
yum install python-setuptools python-devel
pip3 install virtualenvwrapper
</code></pre></div><ul><li>2.修改<code>~/.bashrc</code>文件</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh
</code></pre></div><ul><li>3.从新加载<code>~/.bashrc</code>文件</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>source  ~/.bashrc
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果出现找不到文件,可以使用以下命令查找文件的位置</p> <div class="language-shell script extra-class"><pre class="language-text"><code>sudo find / -name 文件名
</code></pre></div></div> <ul><li>4.新建虚拟环境</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>mkvirtualenv -p python3 pycms
</code></pre></div><ul><li>5.进入虚拟环境</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>workon pycms
</code></pre></div><ul><li>6.安装pip包</li></ul> <p><strong>注意</strong>,需要把<code>requirements.txt</code>文件上传到服务器之后运行</p> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 install -r requirements.txt
</code></pre></div><ul><li>7.拉取所有需要的static file 到同一个目录</li></ul> <p>确保<code>settings.py</code>文件中有以下配置</p> <div class="language-python extra-class"><pre class="language-python"><code>STATIC_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">&quot;static/&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>然后运行命令</p> <div class="language-shell script extra-class"><pre class="language-text"><code>python3 manage.py collectstatic
</code></pre></div><ul><li>8.启动项目</li></ul> <p>在项目的根目录下执行</p> <div class="language-shell script extra-class"><pre class="language-text"><code>python3 manage.py runserver 0.0.0.0:80
</code></pre></div><ul><li>9.通过公网ip地址访问项目</li></ul> <h3 id="域名解析"><a href="#域名解析" class="header-anchor">#</a> 域名解析</h3> <p>设置记录类型为<code>A</code>,设置记录值为对应的外网ip</p> <h3 id="uwsgi-nignx部署项目"><a href="#uwsgi-nignx部署项目" class="header-anchor">#</a> uwsgi+nignx部署项目</h3> <h4 id="安装uwsgi"><a href="#安装uwsgi" class="header-anchor">#</a> 安装uwsgi</h4> <p>web 容器,拉起项目</p> <ul><li>1.安装</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>pip3 install uwsgi
</code></pre></div><ul><li>2.测试</li></ul> <p>在项目的根目录运行</p> <div class="language-shell script extra-class"><pre class="language-text"><code>#项目名称.wsgi
uwsgi --http :8000 --module project.wsgi
</code></pre></div><ul><li>3.配置</li></ul> <p>新建 <code>项目根目录/config/uwsgi.ini</code></p> <div class="language-shell script extra-class"><pre class="language-text"><code># uwsgi.ini file
[uwsgi]

# 表示需要操作的目录,也就是项目的目录
chdir           = /root/pycms
# Django的wsgi file
# wsgi文件的路径,名称和项目的应用名称一直
module          = project.wsgi

# process-related settings
# master
master          = true
# maximum number of worker processes
# 进程数
processes       = 10
# the socket (use the full path to be safe)
socket          = 127.0.0.1:8000
# chmod-socket    = 664
# clear environment on exit
vacuum          = true
# 虚拟环境的目录
virtualenv = /root/.virtualenvs/pycms
# 运行log存放文件
logto = /tmp/uwsgi.log
</code></pre></div><ul><li>4.启动uwsgi</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>workon pycms
# -d表示后台运行
uwsgi -d -i 项目根目录/config/uwsgi.ini
</code></pre></div><ul><li>5.查看启动</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>ps aux|grep uwsgi
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意:用配置文件启动的uwsgi不能直接在浏览器中访问</p></div> <ul><li>6.查看端口</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>netstat -lpnt
</code></pre></div><ul><li>6.关闭uwsgi</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>killall -9 uwsgi
</code></pre></div><h4 id="安装nginx"><a href="#安装nginx" class="header-anchor">#</a> 安装nginx</h4> <p>nginx主要用来反向代理,端口转发</p> <ul><li>1.安装</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>sudo yum install epel-release
sudo yum install nginx
</code></pre></div><ul><li>2.启动</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>sudo systemctl start nginx
</code></pre></div><ul><li>3.新建 <code>项目根目录/config/nginx.conf</code></li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code># the upstream component nginx needs to connect to
upstream django {
server 127.0.0.1:8000; #转发到的端口,同uwsig配置的端口一直
}
# configuration of the server

server {
# 监听的端口
listen      80;
# 域名或者ip地址,如果共存用空格隔开
server_name 你的ip地址; 
charset     utf-8;

# 上传文件大小设置
client_max_body_size 75M;   

location /media  {
    alias 项目根目录/media;  # 指向django的media目录
}

location /static {
    alias 项目根目录/static; # 指向django的static目录
}

# 非静态资源请求转发到django
location / {
    uwsgi_pass  django;
    include     uwsgi_params; # the uwsgi_params file you installed
}
}
</code></pre></div><ul><li>4.将该配置文件加入到nginx的启动配置文件中</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>sudo ln -s pycms_nginx.conf /etc/nginx/conf.d/
</code></pre></div><ul><li><ol start="5"><li>修改 /etc/nginx/nginx.conf</li></ol></li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>user root
</code></pre></div><ul><li>6.启动nginx</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>sudo systemctl start nginx
</code></pre></div><ul><li>7.重启nigx</li></ul> <div class="language-shell script extra-class"><pre class="language-text"><code>sudo systemctl restart nginx
</code></pre></div><h2 id="附录-pycharm常用调试技巧"><a href="#附录-pycharm常用调试技巧" class="header-anchor">#</a> 附录:pycharm常用调试技巧</h2> <ul><li>在需要调试的代码对应的行号处单击设置断点</li> <li>右键以debug模式运行代码,代码会暂停在端点处,常见调试按钮
<ul><li>F8(第二个按钮) 执行下一步</li> <li>F7(第三个按钮) 进入函数内部</li> <li>Shift+F8(第六个按钮) 跳出函数</li> <li>option + F9(最后一个按钮) 直接跳转到下一个断点处</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/pycms/assets/js/app.faa99c4c.js" defer></script><script src="/pycms/assets/js/2.48b92fcd.js" defer></script><script src="/pycms/assets/js/3.4ab1e0fa.js" defer></script>
  </body>
</html>
